<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Wittyshare: The Future improvements</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Wittyshare
   &#160;<span id="projectnumber">0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">The Future improvements </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Future</h2>
<h3>Internationalization(i18n)</h3>
<p>These are the plans for supporting internationalisation. When Internationalization is turned off, all documents published are considered to be in the default language.</p>
<p>When internationalization is turned on, the default language setting becomes mandatory. Also mandatory is the list of locales that are served to visitors. All documents that are unconfigured regarding i18n are considered to be in the default language.</p>
<p>To create a translation of an existing document, or to create a new document in a language other than the default one, the user has to use the admin interface.</p>
<p>The i18n configuration for a file is located in the file's config. Each content file can have a config file with the same name located in the .config directory. The i18n configuration directives are:</p>
<ul>
<li>id: all documents that are translations of the same content have the same id</li>
<li>locale: locale of the document in the format language or language_territory, for example en or en_US</li>
</ul>
<p>The language of the document requested by the user is the first part of the path in the URL. For example: /nl_BE/bedrijven/presentatie.html</p>
<p>When this request is received, the language is first extracted: lang = nl_BE then the path is passed to eat_path: node = eat_path("/bedrijven/presentatie.html", "nl_BE");</p>
<p>Let's say the content was first published in english, and the default language is set to english. We have this directory structure:</p>
<p>-companies +-.config +-properties +-presentation.html.json +-presentatie.html.json +-presentation.html +-__sd_presentation.html +-__ld_presentation.html +-presentatie.html +-__sd_presentatie.fhtml +-__ld_presentatie.fhtml</p>
<p>The i18n content of properties is: nl_BE : title: bedrijven this tells us that the name of the directory "companies" in the locale nl_BE is "bedrijven".</p>
<p>When the directory structure is crawled, all this info is put in the nodes. I18n information stored in the nodes gives the name of the node in other languages. So in the node for the directory companies, we have the info: nl_BE: bedrijven</p>
<p>The node needs to provide the method getChildByName that can be called to get the child handling i18n: root.getChildByName("bedrijven", "nl_BE")</p>
<p>and then get to the file node: dir_node.getChildByName("presentatie.html", "nl_BE")</p>
<p>once we have the node, we have access to its description in the language: node.getShortDescription("nl_BE") node.getLongDescription("nl_BE")</p>
<p>The short and long descriptions of each file is put in the same directory with the following naming convention:</p>
<ul>
<li>start with a double undescore: __</li>
<li>put the type of description it contains: sd for short, ld for long description</li>
<li>follow by an _</li>
<li>follow by the content filename without filename</li>
<li>give the .fhtml extension so it is identified as an html fragment and is indexed by the search engine.</li>
</ul>
<p>A request for /companies/presentation.html would also be routed correctly: if no locale is present in the URL, we use the default language. For search engine friendlyness (no duplicate content), we should redirect /en_US/companies/presentation.html to /companies/presentation.html with a 301 status.</p>
<p>Questions/remarks:</p>
<ul>
<li>at the first request, when we detect the prefered locales of the browser, we should set in the session to the nearest locale that is served by the system</li>
<li>the admin should have access to documents in locales that are not configured as being served. So he can test the site in a locale not yet available. (see below for proposed solution)</li>
<li>how do we exclude from search index the content in a locale not yet served? This seems to make mandatory an environment dedicated to edition of content when the indexer does not run. The indexer would only run in the production environment where all documents present are to be served. However, this complicates the transfer of files from the edition env to the production env as files in not published locales should be excluded from the sync. I don't think that's possible. A possibly better solution is to add a check in Node.isAuthorized and return false if the language requested is not made available. that would put all content files on the prod server, but prevent the consultation by visitors and the presence of these documents in the search results.</li>
<li>we should also limit search to the current language, and possibly enable search in all languages</li>
<li>the archive of a directory should only contain content of the language served</li>
</ul>
<h3>Git Integration</h3>
<p>TODO </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Dec 23 2013 22:47:21 for Wittyshare by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
